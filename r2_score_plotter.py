from pprint import pprint
import numpy as np
import matplotlib.pyplot as plt
from pathlib import Path


# for models trained using all characteristics 
result = [{'Lasso_alpha0.1': {'all': {'r2_score': 2.4646986504062163e-05, 'R2_score_squared_OSXS': 7.279332403054006e-05}, 'call': {'r2_score': 0.0001990914898122309, 'R2_score_squared_OSXS': 0.00019912317928660883}, 'put': {'r2_score': -3.0016558954015817, 'R2_score_squared_OSXS': -1.467396897245774}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.001730740083227822, 'R2_score_squared_OSXS': -0.0017092975373287356}, 'call': {'r2_score': -0.000701568147281284, 'R2_score_squared_OSXS': -0.0006965056289871541}, 'put': {'r2_score': -13.705754487186836, 'R2_score_squared_OSXS': -13.447952544556731}}, 'GBR_n100': {'all': {'r2_score': -0.0006208498315039002, 'R2_score_squared_OSXS': -0.0005606146578287508}, 'call': {'r2_score': -0.0006985352084127872, 'R2_score_squared_OSXS': -0.0005739044357653267}, 'put': {'r2_score': 0.15375438410167097, 'R2_score_squared_OSXS': 0.17453983083924973}}, 'RF_n100': {'all': {'r2_score': -0.005089611976529129, 'R2_score_squared_OSXS': -0.005089232283557621}, 'call': {'r2_score': -0.003023957246151454, 'R2_score_squared_OSXS': -0.002992325179622224}, 'put': {'r2_score': -26.6882854155284, 'R2_score_squared_OSXS': -26.266771867828886}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.0023916029863495503, 'R2_score_squared_OSXS': -0.0018264306386841511}, 'call': {'r2_score': -0.001647578021871432, 'R2_score_squared_OSXS': -0.0014233283257936158}, 'put': {'r2_score': -0.9137300195055329, 'R2_score_squared_OSXS': -0.4751639723197991}}, 'Ridge_alpha0.1': {'all': {'r2_score': -672541.2921178257, 'R2_score_squared_OSXS': -672199.1702312101}, 'call': {'r2_score': -485266.3669743777, 'R2_score_squared_OSXS': -484960.7060128656}, 'put': {'r2_score': -225446359.21770072, 'R2_score_squared_OSXS': -225369708.62256905}}, 'GBR_n100': {'all': {'r2_score': 4.9455638338247176e-05, 'R2_score_squared_OSXS': 5.69199482646221e-05}, 'call': {'r2_score': 4.323167023245755e-05, 'R2_score_squared_OSXS': 6.170967321339482e-05}, 'put': {'r2_score': -0.010818985487416999, 'R2_score_squared_OSXS': -0.009963032527915638}}, 'RF_n100': {'all': {'r2_score': -0.011550002507060952, 'R2_score_squared_OSXS': -0.01148853337102973}, 'call': {'r2_score': -0.005960011230006446, 'R2_score_squared_OSXS': -0.005943985036908295}, 'put': {'r2_score': -6.739032964329641, 'R2_score_squared_OSXS': -6.673172075315279}}}, {'Lasso_alpha0.1': {'all': {'r2_score': 4.8418756770862714e-05, 'R2_score_squared_OSXS': 5.185824164810615e-05}, 'call': {'r2_score': 0.00020349352048487646, 'R2_score_squared_OSXS': 0.00031443244491147215}, 'put': {'r2_score': -1.9239265128608714, 'R2_score_squared_OSXS': -1.4221189833564507}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.3805421988592059, 'R2_score_squared_OSXS': -0.38025271120405435}, 'call': {'r2_score': -0.2241999741836913, 'R2_score_squared_OSXS': -0.22394195306744735}, 'put': {'r2_score': -897.2446120963243, 'R2_score_squared_OSXS': -896.9279699892259}}, 'GBR_n100': {'all': {'r2_score': -0.0009648897107727983, 'R2_score_squared_OSXS': -0.0007341778698539692}, 'call': {'r2_score': -0.0011681335963857897, 'R2_score_squared_OSXS': -0.0007637773599211695}, 'put': {'r2_score': 0.12624380601097995, 'R2_score_squared_OSXS': 0.12625449251929943}}, 'RF_n100': {'all': {'r2_score': -0.0052513117337549264, 'R2_score_squared_OSXS': -0.004254920382262162}, 'call': {'r2_score': -0.0024747369688957743, 'R2_score_squared_OSXS': -0.0022482810554087518}, 'put': {'r2_score': -16.94908798855062, 'R2_score_squared_OSXS': -11.48759086186676}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.000627649458297519, 'R2_score_squared_OSXS': -0.0005922758516501148}, 'call': {'r2_score': -0.0003724272026581765, 'R2_score_squared_OSXS': -0.00034807207287834707}, 'put': {'r2_score': -2.5615893653246053, 'R2_score_squared_OSXS': -2.4476129783354694}}, 'Ridge_alpha0.1': {'all': {'r2_score': -161802201684706.5, 'R2_score_squared_OSXS': -159694382487950.3}, 'call': {'r2_score': -94282841054331.62, 'R2_score_squared_OSXS': -93060752007191.28}, 'put': {'r2_score': -6.765153207870712e+17, 'R2_score_squared_OSXS': -6.676399883856682e+17}}, 'GBR_n100': {'all': {'r2_score': 0.00010598736117839458, 'R2_score_squared_OSXS': 0.00010619592029570413}, 'call': {'r2_score': 0.00010938397740001271, 'R2_score_squared_OSXS': 0.00011010714435355506}, 'put': {'r2_score': -0.03827266534466589, 'R2_score_squared_OSXS': -0.03736375022103644}}, 'RF_n100': {'all': {'r2_score': -0.016254393157926206, 'R2_score_squared_OSXS': -0.003289625865873891}, 'call': {'r2_score': -0.009702316141832812, 'R2_score_squared_OSXS': -0.001998892170389288}, 'put': {'r2_score': -65.6539394577627, 'R2_score_squared_OSXS': -12.927095907941494}}}, {'Lasso_alpha0.1': {'all': {'r2_score': 1.4724772246177409e-05, 'R2_score_squared_OSXS': 6.055653158421048e-05}, 'call': {'r2_score': -2.5693899570633505e-05, 'R2_score_squared_OSXS': 8.183869449696068e-05}, 'put': {'r2_score': -0.07219356596889104, 'R2_score_squared_OSXS': -0.06141667877351198}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0004947066131739675, 'R2_score_squared_OSXS': -0.000494338190683008}, 'call': {'r2_score': -0.00021131020438880377, 'R2_score_squared_OSXS': -0.00020173526669076125}, 'put': {'r2_score': -1.239316054891089, 'R2_score_squared_OSXS': -1.1641687742802889}}, 'GBR_n100': {'all': {'r2_score': -0.000290701694351414, 'R2_score_squared_OSXS': -0.00016862785413462866}, 'call': {'r2_score': -0.0003335916180842169, 'R2_score_squared_OSXS': -0.0001545216594576182}, 'put': {'r2_score': -0.06366315222094854, 'R2_score_squared_OSXS': -0.05725259996546095}}, 'RF_n100': {'all': {'r2_score': -0.04793423577660394, 'R2_score_squared_OSXS': -0.01020273612293443}, 'call': {'r2_score': -0.02607765769142878, 'R2_score_squared_OSXS': -0.005653533032728308}, 'put': {'r2_score': -79.0116953337819, 'R2_score_squared_OSXS': -16.40743479713671}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.00042166462694082085, 'R2_score_squared_OSXS': -0.0003164018389492096}, 'call': {'r2_score': -0.00047113926136521656, 'R2_score_squared_OSXS': -0.0003016218183538033}, 'put': {'r2_score': -0.026249522377509438, 'R2_score_squared_OSXS': -0.02477423222952191}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0018782445226610545, 'R2_score_squared_OSXS': -0.0017591426763117202}, 'call': {'r2_score': -0.0014293385214743104, 'R2_score_squared_OSXS': -0.0011632292078445072}, 'put': {'r2_score': -1.0534184607392563, 'R2_score_squared_OSXS': -1.0463816380059972}}, 'GBR_n100': {'all': {'r2_score': 0.0003089655235491984, 'R2_score_squared_OSXS': 0.00033159990863362854}, 'call': {'r2_score': 0.00027904032579706417, 'R2_score_squared_OSXS': 0.0003575548050330779}, 'put': {'r2_score': -0.06565289618951287, 'R2_score_squared_OSXS': -0.049989565548779646}}, 'RF_n100': {'all': {'r2_score': -0.029826588035411827, 'R2_score_squared_OSXS': -0.0033409553060137487}, 'call': {'r2_score': -0.015338327835464183, 'R2_score_squared_OSXS': -0.0020090175259919185}, 'put': {'r2_score': -29.973956515804808, 'R2_score_squared_OSXS': -2.7167797033127647}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.00017990226292696754, 'R2_score_squared_OSXS': -0.0001770276508494817}, 'call': {'r2_score': -0.00012548269453649397, 'R2_score_squared_OSXS': -0.00010071762612917645}, 'put': {'r2_score': -1.1860093895327113, 'R2_score_squared_OSXS': -1.065637296145228}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.002040966169508218, 'R2_score_squared_OSXS': -0.001997091402880402}, 'call': {'r2_score': -0.0013343793321241026, 'R2_score_squared_OSXS': -0.0012886599882007133}, 'put': {'r2_score': -10.222199069267184, 'R2_score_squared_OSXS': -10.141579952141303}}, 'GBR_n100': {'all': {'r2_score': -0.00039931535693304987, 'R2_score_squared_OSXS': -0.00037777523618776065}, 'call': {'r2_score': -0.00044420107488751803, 'R2_score_squared_OSXS': -0.00039143587833945226}, 'put': {'r2_score': 0.18920813042180973, 'R2_score_squared_OSXS': 0.20550663355879606}}, 'RF_n100': {'all': {'r2_score': -0.07879704168080393, 'R2_score_squared_OSXS': -0.0011667319600876525}, 'call': {'r2_score': -0.044637173527035, 'R2_score_squared_OSXS': -0.000609161573049688}, 'put': {'r2_score': -473.7117647126085, 'R2_score_squared_OSXS': -7.719839705993483}}}, {'Lasso_alpha0.1': {'all': {'r2_score': 0.000461272129993473, 'R2_score_squared_OSXS': 0.0005235850646461149}, 'call': {'r2_score': 0.00043012086152172113, 'R2_score_squared_OSXS': 0.0006444338739967082}, 'put': {'r2_score': -0.44539258587308206, 'R2_score_squared_OSXS': -0.3706894472513451}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.015775835323349918, 'R2_score_squared_OSXS': -0.01574676431219313}, 'call': {'r2_score': -0.007693912816110204, 'R2_score_squared_OSXS': -0.007604481503350913}, 'put': {'r2_score': -25.119563982024797, 'R2_score_squared_OSXS': -25.096531376412663}}, 'GBR_n100': {'all': {'r2_score': -0.0009561625787137817, 'R2_score_squared_OSXS': -0.0006979614678508383}, 'call': {'r2_score': -0.0011756533400673064, 'R2_score_squared_OSXS': -0.0007583626212646077}, 'put': {'r2_score': 0.12463686342028979, 'R2_score_squared_OSXS': 0.12684992533965034}}, 'RF_n100': {'all': {'r2_score': -1.481870266821852, 'R2_score_squared_OSXS': -0.4210235050356641}, 'call': {'r2_score': -0.8527283388068403, 'R2_score_squared_OSXS': -0.24791043568084592}, 'put': {'r2_score': -1914.2839772946572, 'R2_score_squared_OSXS': -526.9689664527491}}}, {'Lasso_alpha0.1': {'all': {'r2_score': 0.00012459713909007686, 'R2_score_squared_OSXS': 0.00012562732777388064}, 'call': {'r2_score': 0.00017716834233805212, 'R2_score_squared_OSXS': 0.00017846011604305545}, 'put': {'r2_score': -0.13505755837377098, 'R2_score_squared_OSXS': -0.11604659460113909}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.00014345146612804172, 'R2_score_squared_OSXS': -0.00012894562597076664}, 'call': {'r2_score': 0.00036342743591954996, 'R2_score_squared_OSXS': 0.00037076748959552486}, 'put': {'r2_score': -1.1564165270470115, 'R2_score_squared_OSXS': -1.1400913148615603}}, 'GBR_n100': {'all': {'r2_score': -0.00024314830494875928, 'R2_score_squared_OSXS': -0.00022679244115120234}, 'call': {'r2_score': -0.00024354858010822156, 'R2_score_squared_OSXS': -0.00022371516444485984}, 'put': {'r2_score': -0.016374692746282227, 'R2_score_squared_OSXS': -0.014109596569579441}}, 'RF_n100': {'all': {'r2_score': -5.513193823238923, 'R2_score_squared_OSXS': -0.004381427607047961}, 'call': {'r2_score': -3.1996282392743964, 'R2_score_squared_OSXS': -0.001875858776179129}, 'put': {'r2_score': -5205.51451596104, 'R2_score_squared_OSXS': -5.636631838290168}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.0007791245818082881, 'R2_score_squared_OSXS': -0.000632933806459457}, 'call': {'r2_score': -0.00031446679883284645, 'R2_score_squared_OSXS': -6.976271281300406e-05}, 'put': {'r2_score': -5.758063788618686, 'R2_score_squared_OSXS': -5.7555855941533505}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0026814579179643694, 'R2_score_squared_OSXS': -0.0025337499621638226}, 'call': {'r2_score': -0.0012809745498731928, 'R2_score_squared_OSXS': -0.0010874048764624167}, 'put': {'r2_score': -15.628215340068806, 'R2_score_squared_OSXS': -15.559271649777966}}, 'GBR_n100': {'all': {'r2_score': -0.0005346883106864819, 'R2_score_squared_OSXS': -0.00043604874497171764}, 'call': {'r2_score': -0.0006299884487701579, 'R2_score_squared_OSXS': -0.00046118421355845207}, 'put': {'r2_score': 0.14615145193054058, 'R2_score_squared_OSXS': 0.14673292084395606}}, 'RF_n100': {'all': {'r2_score': -1.6953085587878247, 'R2_score_squared_OSXS': -0.00010191076795273979}, 'call': {'r2_score': -0.9487788450316132, 'R2_score_squared_OSXS': -8.867371237153421e-05}, 'put': {'r2_score': -7874.836039314667, 'R2_score_squared_OSXS': -0.13666604314401187}}}, {'Lasso_alpha0.1': {'all': {'r2_score': 0.0001515971571254271, 'R2_score_squared_OSXS': 0.0001524795890379682}, 'call': {'r2_score': 0.00030848181167342226, 'R2_score_squared_OSXS': 0.00036897063543728237}, 'put': {'r2_score': -1.4152866060710507, 'R2_score_squared_OSXS': -1.0983409238746318}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.001627599880436259, 'R2_score_squared_OSXS': -0.0016190384024292737}, 'call': {'r2_score': -0.0008444718133695517, 'R2_score_squared_OSXS': -0.0008371638213977572}, 'put': {'r2_score': -4.794947375160883, 'R2_score_squared_OSXS': -4.4772174226917345}}, 'GBR_n100': {'all': {'r2_score': -0.0004018288767027034, 'R2_score_squared_OSXS': -0.00022904585581651205}, 'call': {'r2_score': -0.0005180027470146342, 'R2_score_squared_OSXS': -0.00023730115013131936}, 'put': {'r2_score': 0.05624771421752406, 'R2_score_squared_OSXS': 0.05831635024945725}}, 'RF_n100': {'all': {'r2_score': -0.3964017018110646, 'R2_score_squared_OSXS': -0.0015894341629461017}, 'call': {'r2_score': -0.22252744510655997, 'R2_score_squared_OSXS': -0.0007718842786008651}, 'put': {'r2_score': -938.7671894226902, 'R2_score_squared_OSXS': -4.33051866941424}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.00017153649915302438, 'R2_score_squared_OSXS': -0.00017073412322266002}, 'call': {'r2_score': -3.189624358501675e-05, 'R2_score_squared_OSXS': -1.3624625222030673e-05}, 'put': {'r2_score': -2.3016334307848854, 'R2_score_squared_OSXS': -2.131444804111468}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0028673732586474987, 'R2_score_squared_OSXS': -0.002867314646336272}, 'call': {'r2_score': -0.0011863320034135594, 'R2_score_squared_OSXS': -0.0011845291539462899}, 'put': {'r2_score': -23.529685544578268, 'R2_score_squared_OSXS': -23.51103277269667}}, 'GBR_n100': {'all': {'r2_score': -3.5483396309876625e-05, 'R2_score_squared_OSXS': -3.0791008946984277e-06}, 'call': {'r2_score': -5.7369398842599395e-05, 'R2_score_squared_OSXS': 2.6991435729817326e-06}, 'put': {'r2_score': -0.07730853321897913, 'R2_score_squared_OSXS': -0.07673679416051504}}, 'RF_n100': {'all': {'r2_score': -0.3594367027255314, 'R2_score_squared_OSXS': -0.0031392802164005307}, 'call': {'r2_score': -0.20011937864324492, 'R2_score_squared_OSXS': -0.0019247768667829401}, 'put': {'r2_score': -2194.5955398338965, 'R2_score_squared_OSXS': -16.692156793382246}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.000579217126893905, 'R2_score_squared_OSXS': -0.0005758876522619083}, 'call': {'r2_score': 0.00023376986483281126, 'R2_score_squared_OSXS': 0.0002508400728036264}, 'put': {'r2_score': -2.2513108934367874, 'R2_score_squared_OSXS': -2.117398177274583}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.008356165152808348, 'R2_score_squared_OSXS': -0.008098149258845}, 'call': {'r2_score': -0.0027567873352551953, 'R2_score_squared_OSXS': -0.0025584240734186636}, 'put': {'r2_score': -14.641319518509052, 'R2_score_squared_OSXS': -14.458041543705543}}, 'GBR_n100': {'all': {'r2_score': -0.0015305827374203496, 'R2_score_squared_OSXS': -0.00010771424711331079}, 'call': {'r2_score': -0.0008469358741636235, 'R2_score_squared_OSXS': -7.881551998933922e-05}, 'put': {'r2_score': -1.9178352306792048, 'R2_score_squared_OSXS': -0.2225206977863463}}, 'RF_n100': {'all': {'r2_score': -6.608022523728523, 'R2_score_squared_OSXS': -3.876555867344753}, 'call': {'r2_score': -3.671870223953155, 'R2_score_squared_OSXS': -2.192320852142167}, 'put': {'r2_score': -7602.754014796536, 'R2_score_squared_OSXS': -4361.246235727662}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.004860688318368833, 'R2_score_squared_OSXS': -0.00458973254857753}, 'call': {'r2_score': -0.0011604646065821456, 'R2_score_squared_OSXS': -0.0011501562197993032}, 'put': {'r2_score': -3.2854824118954244, 'R2_score_squared_OSXS': -2.925398856688241}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.03627310409976636, 'R2_score_squared_OSXS': -0.03619438980291423}, 'call': {'r2_score': -0.01900068589877324, 'R2_score_squared_OSXS': -0.018442831183017372}, 'put': {'r2_score': -14.77048246082724, 'R2_score_squared_OSXS': -14.644604260856276}}, 'GBR_n100': {'all': {'r2_score': -0.002742096456251897, 'R2_score_squared_OSXS': -0.0016279493344404372}, 'call': {'r2_score': -0.0009137283414235586, 'R2_score_squared_OSXS': -0.00043007311127762904}, 'put': {'r2_score': -1.704054202557609, 'R2_score_squared_OSXS': -1.1607254327882583}}, 'RF_n100': {'all': {'r2_score': -352.5425996429883, 'R2_score_squared_OSXS': -9.014395079858662}, 'call': {'r2_score': -186.79399981923842, 'R2_score_squared_OSXS': -4.453630149341179}, 'put': {'r2_score': -140223.17127073868, 'R2_score_squared_OSXS': -3856.278814490976}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.006228970382249344, 'R2_score_squared_OSXS': -0.00616836292976175}, 'call': {'r2_score': -0.004954863305980384, 'R2_score_squared_OSXS': -0.004954857535446999}, 'put': {'r2_score': -7.006336150116537, 'R2_score_squared_OSXS': -6.321266479455461}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.013543573947714993, 'R2_score_squared_OSXS': -0.013418258353068868}, 'call': {'r2_score': -0.010521662506598695, 'R2_score_squared_OSXS': -0.010501852468718154}, 'put': {'r2_score': -16.10778015118226, 'R2_score_squared_OSXS': -15.391120345673144}}, 'GBR_n100': {'all': {'r2_score': -0.00039335619708857905, 'R2_score_squared_OSXS': -0.0001329464888009113}, 'call': {'r2_score': -0.00034528775024589287, 'R2_score_squared_OSXS': -8.632959835486176e-05}, 'put': {'r2_score': -0.6209478282066192, 'R2_score_squared_OSXS': -0.4143301016422889}}, 'RF_n100': {'all': {'r2_score': -663.6924590797446, 'R2_score_squared_OSXS': -153.9552910861632}, 'call': {'r2_score': -361.7254957751913, 'R2_score_squared_OSXS': -84.1299088724958}, 'put': {'r2_score': -1571628.3294811419, 'R2_score_squared_OSXS': -363407.3389988015}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.0024290036649845526, 'R2_score_squared_OSXS': -0.0024254938424073114}, 'call': {'r2_score': -0.0010502678137578325, 'R2_score_squared_OSXS': -0.0010365145296711287}, 'put': {'r2_score': -4.328557550803048, 'R2_score_squared_OSXS': -4.322918455349595}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0041490044371226276, 'R2_score_squared_OSXS': -0.004050487161183947}, 'call': {'r2_score': -0.0019083588726371836, 'R2_score_squared_OSXS': -0.0019079386420275402}, 'put': {'r2_score': -7.018012117542666, 'R2_score_squared_OSXS': -6.389880491819186}}, 'GBR_n100': {'all': {'r2_score': -6.331249710211928e-05, 'R2_score_squared_OSXS': -3.4824771347308214e-05}, 'call': {'r2_score': -3.36331831198855e-05, 'R2_score_squared_OSXS': -2.940627262937312e-05}, 'put': {'r2_score': -0.11937262809960503, 'R2_score_squared_OSXS': -0.017475593719731286}}, 'RF_n100': {'all': {'r2_score': -0.9147888879622585, 'R2_score_squared_OSXS': -0.04486208378292966}, 'call': {'r2_score': -0.5095418679505923, 'R2_score_squared_OSXS': -0.023733870670564983}, 'put': {'r2_score': -1264.6456845480861, 'R2_score_squared_OSXS': -65.95425129615876}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -3.46399516957252e-05, 'R2_score_squared_OSXS': 2.3637059682890538e-06}, 'call': {'r2_score': 7.645579061610341e-05, 'R2_score_squared_OSXS': 0.0001658615091951754}, 'put': {'r2_score': -2.3559110945136688, 'R2_score_squared_OSXS': -2.328537577770189}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0008624114004065486, 'R2_score_squared_OSXS': -0.0007897647480219483}, 'call': {'r2_score': -0.00043736309191655387, 'R2_score_squared_OSXS': -0.00036420809230475193}, 'put': {'r2_score': -6.777598632156199, 'R2_score_squared_OSXS': -6.629209292507219}}, 'GBR_n100': {'all': {'r2_score': -4.004318313333144e-05, 'R2_score_squared_OSXS': -1.2108385327502802e-05}, 'call': {'r2_score': -9.24951858813916e-05, 'R2_score_squared_OSXS': -1.3416397455445761e-05}, 'put': {'r2_score': -0.05329756989629719, 'R2_score_squared_OSXS': 0.0008685231950484873}}, 'RF_n100': {'all': {'r2_score': -0.8950516340929289, 'R2_score_squared_OSXS': -0.060469408985523554}, 'call': {'r2_score': -0.4927938354526451, 'R2_score_squared_OSXS': -0.040788830444761004}, 'put': {'r2_score': -5665.867789961235, 'R2_score_squared_OSXS': -276.94088106709137}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.0008767731583283478, 'R2_score_squared_OSXS': -0.0007370168059273041}, 'call': {'r2_score': -0.000680648616175672, 'R2_score_squared_OSXS': -0.00045057012809701646}, 'put': {'r2_score': -0.5323398861745237, 'R2_score_squared_OSXS': -0.5311830416439853}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0018361645122091375, 'R2_score_squared_OSXS': -0.001755763831747581}, 'call': {'r2_score': -0.0006846527116615153, 'R2_score_squared_OSXS': -0.0005649928092319456}, 'put': {'r2_score': -2.234380788500871, 'R2_score_squared_OSXS': -2.2316351833666275}}, 'GBR_n100': {'all': {'r2_score': -6.260684362335844e-05, 'R2_score_squared_OSXS': 8.847852796423084e-05}, 'call': {'r2_score': -0.0001028568918242101, 'R2_score_squared_OSXS': 0.00013880911559049913}, 'put': {'r2_score': -0.11055211833299472, 'R2_score_squared_OSXS': -0.10843935398144233}}, 'RF_n100': {'all': {'r2_score': -0.01855809690909238, 'R2_score_squared_OSXS': -0.01854794806383908}, 'call': {'r2_score': -0.012929491088780942, 'R2_score_squared_OSXS': -0.012841820619746702}, 'put': {'r2_score': -10.22486337543697, 'R2_score_squared_OSXS': -10.167838718630067}}}]
choice_of_feature = "all_features"
# for models trained using nonsparse characteristics 
# result = [{'Lasso_alpha0.1': {'all': {'r2_score': 8.858865711858233e-05, 'R2_score_squared_OSXS': 0.00015185983938004188}, 'call': {'r2_score': 0.0002621207133672865, 'R2_score_squared_OSXS': 0.00026257433631937666}, 'put': {'r2_score': -2.9901161291747087, 'R2_score_squared_OSXS': -1.295418371805935}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0011704395216207697, 'R2_score_squared_OSXS': -0.0011700615798446723}, 'call': {'r2_score': -0.0004149125899122197, 'R2_score_squared_OSXS': -0.00041285186204365054}, 'put': {'r2_score': -10.278790101289825, 'R2_score_squared_OSXS': -10.271458765426491}}, 'GBR_n100': {'all': {'r2_score': -0.0002003554933036611, 'R2_score_squared_OSXS': -0.00019742517913701185}, 'call': {'r2_score': -0.000162956493012123, 'R2_score_squared_OSXS': -0.00015200216080990536}, 'put': {'r2_score': -1.2863000267060127, 'R2_score_squared_OSXS': -0.7309624427151591}}, 'RF_n100': {'all': {'r2_score': -0.17978264012384648, 'R2_score_squared_OSXS': -0.01287808743775476}, 'call': {'r2_score': -0.10396352563018052, 'R2_score_squared_OSXS': -0.00817759946897012}, 'put': {'r2_score': -950.3750123400582, 'R2_score_squared_OSXS': -59.01015914507149}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.0016956103302652181, 'R2_score_squared_OSXS': -0.0010367222095719608}, 'call': {'r2_score': -0.0009626932087334339, 'R2_score_squared_OSXS': -0.0006908522678312767}, 'put': {'r2_score': -0.8996899786500914, 'R2_score_squared_OSXS': -0.4068601384187347}}, 'Ridge_alpha0.1': {'all': {'r2_score': -191186.22104996874, 'R2_score_squared_OSXS': -191088.30845862476}, 'call': {'r2_score': -137949.08012971663, 'R2_score_squared_OSXS': -137861.49282704075}, 'put': {'r2_score': -64088237.13283196, 'R2_score_squared_OSXS': -64066371.16193039}}, 'GBR_n100': {'all': {'r2_score': -0.0026098036459392127, 'R2_score_squared_OSXS': -0.000163705799976821}, 'call': {'r2_score': -0.0017065102153810408, 'R2_score_squared_OSXS': -0.00011696410915407185}, 'put': {'r2_score': -1.1051012331800916, 'R2_score_squared_OSXS': -0.06166199285693219}}, 'RF_n100': {'all': {'r2_score': -0.44426315651731363, 'R2_score_squared_OSXS': -0.3932034210594426}, 'call': {'r2_score': -0.24569360259610162, 'R2_score_squared_OSXS': -0.21943058107012892}, 'put': {'r2_score': -238.78769256184432, 'R2_score_squared_OSXS': -208.66522270361804}}}, {'Lasso_alpha0.1': {'all': {'r2_score': 0.00021144046920829052, 'R2_score_squared_OSXS': 0.00021295710218305341}, 'call': {'r2_score': 0.0003002257356427007, 'R2_score_squared_OSXS': 0.0003992473383342965}, 'put': {'r2_score': -1.5439283375933113, 'R2_score_squared_OSXS': -1.011678668301149}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.43276283250103975, 'R2_score_squared_OSXS': -0.4324670930539263}, 'call': {'r2_score': -0.2544029241619161, 'R2_score_squared_OSXS': -0.25413672145798016}, 'put': {'r2_score': -1023.4549473660938, 'R2_score_squared_OSXS': -1023.1394098308131}}, 'GBR_n100': {'all': {'r2_score': -0.002171832763394388, 'R2_score_squared_OSXS': -5.06977908159012e-05}, 'call': {'r2_score': -0.0019350214077846761, 'R2_score_squared_OSXS': -2.80240116039554e-05}, 'put': {'r2_score': -2.3965845479949905, 'R2_score_squared_OSXS': -0.1265311160653826}}, 'RF_n100': {'all': {'r2_score': -0.9835747809687858, 'R2_score_squared_OSXS': -0.3569986215907113}, 'call': {'r2_score': -0.5180724676493125, 'R2_score_squared_OSXS': -0.17295109254272512}, 'put': {'r2_score': -2669.154951861006, 'R2_score_squared_OSXS': -1054.0185473490521}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.0004510964692181485, 'R2_score_squared_OSXS': -0.0004090451472242851}, 'call': {'r2_score': -0.00028244138897681736, 'R2_score_squared_OSXS': -0.00025426706522391207}, 'put': {'r2_score': -1.6942540589993307, 'R2_score_squared_OSXS': -1.5523095705851788}}, 'Ridge_alpha0.1': {'all': {'r2_score': -165826021475637.03, 'R2_score_squared_OSXS': -163666172903274.38}, 'call': {'r2_score': -96627539734815.25, 'R2_score_squared_OSXS': -95375254416109.3}, 'put': {'r2_score': -6.933394012629069e+17, 'R2_score_squared_OSXS': -6.842452968377524e+17}}, 'GBR_n100': {'all': {'r2_score': -0.0003327580816379072, 'R2_score_squared_OSXS': -5.568745429118671e-05}, 'call': {'r2_score': -0.00020946401873334075, 'R2_score_squared_OSXS': -3.699842748949855e-05}, 'put': {'r2_score': -1.2397462502549321, 'R2_score_squared_OSXS': -0.1878305528178621}}, 'RF_n100': {'all': {'r2_score': -9.046650297920465, 'R2_score_squared_OSXS': -0.13859966214728803}, 'call': {'r2_score': -4.946702717173656, 'R2_score_squared_OSXS': -0.03463770305036018}, 'put': {'r2_score': -41078.95625136836, 'R2_score_squared_OSXS': -931.7190073088384}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -8.083727991214928e-06, 'R2_score_squared_OSXS': 3.710493921538216e-05}, 'call': {'r2_score': -5.0091320598744105e-05, 'R2_score_squared_OSXS': 5.856043575414027e-05}, 'put': {'r2_score': -0.06649746011562119, 'R2_score_squared_OSXS': -0.05395023892296269}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.00024904513588697164, 'R2_score_squared_OSXS': -0.00024865025090536896}, 'call': {'r2_score': -0.00011266079388572159, 'R2_score_squared_OSXS': -9.617872545808481e-05}, 'put': {'r2_score': -0.7094248604650306, 'R2_score_squared_OSXS': -0.6575351041679847}}, 'GBR_n100': {'all': {'r2_score': -0.0001571961255524279, 'R2_score_squared_OSXS': -7.038115774626874e-06}, 'call': {'r2_score': -0.0001932778704476501, 'R2_score_squared_OSXS': 1.5867334609787065e-05}, 'put': {'r2_score': -0.08802615405027359, 'R2_score_squared_OSXS': -0.07467857410405632}}, 'RF_n100': {'all': {'r2_score': -3.620089256612707, 'R2_score_squared_OSXS': -2.791418944929738}, 'call': {'r2_score': -2.431394465306492, 'R2_score_squared_OSXS': -1.4850322243435987}, 'put': {'r2_score': -4286.74620371978, 'R2_score_squared_OSXS': -4039.20050679771}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.0003992679631856788, 'R2_score_squared_OSXS': -0.0002969447942267056}, 'call': {'r2_score': -0.0004526888686187114, 'R2_score_squared_OSXS': -0.00028608798913087874}, 'put': {'r2_score': -0.018103957664405534, 'R2_score_squared_OSXS': -0.016927834240007655}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.001153075687133187, 'R2_score_squared_OSXS': -0.0010313620125608214}, 'call': {'r2_score': -0.0009701780688979866, 'R2_score_squared_OSXS': -0.0007022274240731097}, 'put': {'r2_score': -0.5052306847667707, 'R2_score_squared_OSXS': -0.49904556156874635}}, 'GBR_n100': {'all': {'r2_score': -0.0006040197470429387, 'R2_score_squared_OSXS': -3.3932895118216067e-05}, 'call': {'r2_score': -0.000548144487592328, 'R2_score_squared_OSXS': -4.6685460422635217e-05}, 'put': {'r2_score': -0.24323545692905535, 'R2_score_squared_OSXS': -0.003389217216476448}}, 'RF_n100': {'all': {'r2_score': -0.0078055462661876795, 'R2_score_squared_OSXS': -0.005741576821607142}, 'call': {'r2_score': -0.003273411543671223, 'R2_score_squared_OSXS': -0.002791075017856137}, 'put': {'r2_score': -9.462232944979048, 'R2_score_squared_OSXS': -5.552479672642649}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -7.480256541536612e-05, 'R2_score_squared_OSXS': -7.349393318767383e-05}, 'call': {'r2_score': -6.784500417933437e-05, 'R2_score_squared_OSXS': -4.7228683559108475e-05}, 'put': {'r2_score': -0.5284367311999201, 'R2_score_squared_OSXS': -0.37865654245333613}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0005941501301760521, 'R2_score_squared_OSXS': -0.0005791371192374051}, 'call': {'r2_score': -0.0003553728245873078, 'R2_score_squared_OSXS': -0.00033239030393672486}, 'put': {'r2_score': -3.740242192625412, 'R2_score_squared_OSXS': -3.736918199478664}}, 'GBR_n100': {'all': {'r2_score': -2.7123013123020456e-05, 'R2_score_squared_OSXS': -1.3929600184425794e-05}, 'call': {'r2_score': 3.4229706530330972e-06, 'R2_score_squared_OSXS': 4.812321262481767e-06}, 'put': {'r2_score': -0.8551045684681347, 'R2_score_squared_OSXS': -0.2350075108415246}}, 'RF_n100': {'all': {'r2_score': -0.3729046657448274, 'R2_score_squared_OSXS': -0.3049285206379797}, 'call': {'r2_score': -0.1616789457208161, 'R2_score_squared_OSXS': -0.13630157565789158}, 'put': {'r2_score': -2926.7686494760387, 'R2_score_squared_OSXS': -2302.294248608688}}}, {'Lasso_alpha0.1': {'all': {'r2_score': 0.0005211972365350981, 'R2_score_squared_OSXS': 0.0005826109082951447}, 'call': {'r2_score': 0.00046619106908252217, 'R2_score_squared_OSXS': 0.0006784715208898451}, 'put': {'r2_score': -0.3728242630303942, 'R2_score_squared_OSXS': -0.2979208030876268}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.013622391720915061, 'R2_score_squared_OSXS': -0.013596911129503786}, 'call': {'r2_score': -0.006939223526361449, 'R2_score_squared_OSXS': -0.006858850232527525}, 'put': {'r2_score': -20.866548411377345, 'R2_score_squared_OSXS': -20.84426849935477}}, 'GBR_n100': {'all': {'r2_score': -0.0003627320035022308, 'R2_score_squared_OSXS': -8.395827430218716e-05}, 'call': {'r2_score': -0.0004992526244447237, 'R2_score_squared_OSXS': -2.3278283082905915e-05}, 'put': {'r2_score': -0.12652882749829297, 'R2_score_squared_OSXS': -0.12641141820902768}}, 'RF_n100': {'all': {'r2_score': -1.469250109718888, 'R2_score_squared_OSXS': -1.4200371926463062}, 'call': {'r2_score': -0.9302093519648997, 'R2_score_squared_OSXS': -0.8894281948700191}, 'put': {'r2_score': -1640.5190088077536, 'R2_score_squared_OSXS': -1606.8206343514914}}}, {'Lasso_alpha0.1': {'all': {'r2_score': 0.00015816837263959993, 'R2_score_squared_OSXS': 0.0001582046799104564}, 'call': {'r2_score': 0.0001952933296083259, 'R2_score_squared_OSXS': 0.000198365006368717}, 'put': {'r2_score': -0.10030696372239656, 'R2_score_squared_OSXS': -0.08779066331510643}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0001180789490684564, 'R2_score_squared_OSXS': -0.00011104570593634122}, 'call': {'r2_score': 0.0003703801790796435, 'R2_score_squared_OSXS': 0.0003739918400949005}, 'put': {'r2_score': -1.1149910723199485, 'R2_score_squared_OSXS': -1.1072136674827835}}, 'GBR_n100': {'all': {'r2_score': -5.662291708419254e-05, 'R2_score_squared_OSXS': -4.782674241021745e-05}, 'call': {'r2_score': -3.605219018076866e-05, 'R2_score_squared_OSXS': -1.8713065972786325e-05}, 'put': {'r2_score': -0.06331869423221348, 'R2_score_squared_OSXS': -0.06308552276362711}}, 'RF_n100': {'all': {'r2_score': -0.09249039652420299, 'R2_score_squared_OSXS': -0.03068982649181029}, 'call': {'r2_score': -0.058563201729929126, 'R2_score_squared_OSXS': -0.018725165607542005}, 'put': {'r2_score': -76.36468823463716, 'R2_score_squared_OSXS': -26.402098027182046}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.0005537268625144254, 'R2_score_squared_OSXS': -0.00040820060093005317}, 'call': {'r2_score': -0.0001927221854205463, 'R2_score_squared_OSXS': 5.1211473808043806e-05}, 'put': {'r2_score': -4.664807285673831, 'R2_score_squared_OSXS': -4.662466338490514}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.001860172073967048, 'R2_score_squared_OSXS': -0.001717459907714991}, 'call': {'r2_score': -0.000757127515840228, 'R2_score_squared_OSXS': -0.0005690066284316231}, 'put': {'r2_score': -12.490726029343795, 'R2_score_squared_OSXS': -12.426520561014206}}, 'GBR_n100': {'all': {'r2_score': -5.070018089270434e-05, 'R2_score_squared_OSXS': 1.8885069247853714e-05}, 'call': {'r2_score': -0.0001244481230442407, 'R2_score_squared_OSXS': 3.4271893164739e-05}, 'put': {'r2_score': -0.08017908461685619, 'R2_score_squared_OSXS': -0.04864006970207768}}, 'RF_n100': {'all': {'r2_score': -0.12116201212801925, 'R2_score_squared_OSXS': -0.08509077378956631}, 'call': {'r2_score': -0.07026389762549812, 'R2_score_squared_OSXS': -0.049605780463932714}, 'put': {'r2_score': -537.7128653437029, 'R2_score_squared_OSXS': -375.12701956965174}}}, {'Lasso_alpha0.1': {'all': {'r2_score': 0.0002463290454703948, 'R2_score_squared_OSXS': 0.0002492833713352294}, 'call': {'r2_score': 0.00039588434215864776, 'R2_score_squared_OSXS': 0.0004658141523693482}, 'put': {'r2_score': -1.3756161047273525, 'R2_score_squared_OSXS': -1.099855785526112}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0010946869953356586, 'R2_score_squared_OSXS': -0.0010946217691343296}, 'call': {'r2_score': -0.0003267185850501786, 'R2_score_squared_OSXS': -0.00030096561823822476}, 'put': {'r2_score': -4.712366102813414, 'R2_score_squared_OSXS': -4.546070952864644}}, 'GBR_n100': {'all': {'r2_score': -0.0005094101949036922, 'R2_score_squared_OSXS': 2.8749481905454566e-05}, 'call': {'r2_score': -0.0005602712266499221, 'R2_score_squared_OSXS': 5.581227705320213e-05}, 'put': {'r2_score': -0.29610504269056404, 'R2_score_squared_OSXS': -0.05719430811469661}}, 'RF_n100': {'all': {'r2_score': -219.56927259525915, 'R2_score_squared_OSXS': -79.76528622705278}, 'call': {'r2_score': -121.42930257819961, 'R2_score_squared_OSXS': -46.07772183846791}, 'put': {'r2_score': -529541.5737975661, 'R2_score_squared_OSXS': -180508.38813951542}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.00016961928872638588, 'R2_score_squared_OSXS': -0.00016785641190897316}, 'call': {'r2_score': -3.0048933141069156e-05, 'R2_score_squared_OSXS': -8.983993300848425e-06}, 'put': {'r2_score': -2.300668299213521, 'R2_score_squared_OSXS': -2.1579193935110363}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.000238141363806621, 'R2_score_squared_OSXS': -0.00023801256224831313}, 'call': {'r2_score': 0.0003210354273207594, 'R2_score_squared_OSXS': 0.0003229382815979065}, 'put': {'r2_score': -8.078537531063928, 'R2_score_squared_OSXS': -8.063967930765909}}, 'GBR_n100': {'all': {'r2_score': -4.437105171661848e-05, 'R2_score_squared_OSXS': 1.4685261457425547e-05}, 'call': {'r2_score': -5.101916042815624e-05, 'R2_score_squared_OSXS': 3.8739914798968655e-05}, 'put': {'r2_score': -0.2871391083951198, 'R2_score_squared_OSXS': -0.2771317473296544}}, 'RF_n100': {'all': {'r2_score': -87.03987343503434, 'R2_score_squared_OSXS': -35.95406254955516}, 'call': {'r2_score': -46.8190665022632, 'R2_score_squared_OSXS': -20.529143563033134}, 'put': {'r2_score': -553941.1533102177, 'R2_score_squared_OSXS': -210516.06961930468}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.0004684675624444523, 'R2_score_squared_OSXS': -0.0004681381004481011}, 'call': {'r2_score': 0.0003232505979834377, 'R2_score_squared_OSXS': 0.00035776791903985306}, 'put': {'r2_score': -2.1961671431027923, 'R2_score_squared_OSXS': -2.1165868325143817}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.008629057801455176, 'R2_score_squared_OSXS': -0.008386256108653845}, 'call': {'r2_score': -0.002707084735246834, 'R2_score_squared_OSXS': -0.0025164009368274787}, 'put': {'r2_score': -15.476098337935898, 'R2_score_squared_OSXS': -15.310286336301981}}, 'GBR_n100': {'all': {'r2_score': -0.0020454102377864825, 'R2_score_squared_OSXS': -0.00011435047829855272}, 'call': {'r2_score': -0.0013540073437638966, 'R2_score_squared_OSXS': -6.937076750124227e-05}, 'put': {'r2_score': -1.938488812523817, 'R2_score_squared_OSXS': -0.1959565181920595}}, 'RF_n100': {'all': {'r2_score': -53.367972454102315, 'R2_score_squared_OSXS': -51.73338192992673}, 'call': {'r2_score': -29.63269310133256, 'R2_score_squared_OSXS': -28.7134481967745}, 'put': {'r2_score': -61458.06896095109, 'R2_score_squared_OSXS': -59604.14723861325}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.0045911706128638485, 'R2_score_squared_OSXS': -0.004402068876655063}, 'call': {'r2_score': -0.0010075107684559548, 'R2_score_squared_OSXS': -0.0010057545179553706}, 'put': {'r2_score': -3.186844579538537, 'R2_score_squared_OSXS': -2.891615907102275}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.031345558162123366, 'R2_score_squared_OSXS': -0.03131959119013539}, 'call': {'r2_score': -0.0160743332196025, 'R2_score_squared_OSXS': -0.01565325466659151}, 'put': {'r2_score': -13.076699133458618, 'R2_score_squared_OSXS': -12.900916220085998}}, 'GBR_n100': {'all': {'r2_score': -0.0007550317770097514, 'R2_score_squared_OSXS': -0.0007246084451244528}, 'call': {'r2_score': -0.0006510736650191529, 'R2_score_squared_OSXS': -0.0004412200086212348}, 'put': {'r2_score': -0.24715373472982094, 'R2_score_squared_OSXS': -0.20116264346409918}}, 'RF_n100': {'all': {'r2_score': -69.48107967765826, 'R2_score_squared_OSXS': -66.98221302479084}, 'call': {'r2_score': -37.247427658343035, 'R2_score_squared_OSXS': -35.91170302678154}, 'put': {'r2_score': -27270.836385599287, 'R2_score_squared_OSXS': -26286.786842336194}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.005991002536322121, 'R2_score_squared_OSXS': -0.005928859662359898}, 'call': {'r2_score': -0.0046999413881705365, 'R2_score_squared_OSXS': -0.0046999060775925194}, 'put': {'r2_score': -7.094198743647707, 'R2_score_squared_OSXS': -6.406420503874131}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.012430738354030968, 'R2_score_squared_OSXS': -0.012388029658684241}, 'call': {'r2_score': -0.009584597264343797, 'R2_score_squared_OSXS': -0.00958340769321131}, 'put': {'r2_score': -15.191963959218928, 'R2_score_squared_OSXS': -14.815542108214348}}, 'GBR_n100': {'all': {'r2_score': -0.0009195288335510643, 'R2_score_squared_OSXS': -0.0007951743658765054}, 'call': {'r2_score': -0.0005742966328521337, 'R2_score_squared_OSXS': -0.0005643675200823761}, 'put': {'r2_score': -2.1674028464798867, 'R2_score_squared_OSXS': -1.2747163684612564}}, 'RF_n100': {'all': {'r2_score': -23.344248671696576, 'R2_score_squared_OSXS': -22.274554316210335}, 'call': {'r2_score': -12.550557208801488, 'R2_score_squared_OSXS': -11.99166011429334}, 'put': {'r2_score': -56177.07987920861, 'R2_score_squared_OSXS': -53515.34198890039}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.002431322056495988, 'R2_score_squared_OSXS': -0.0024274376068034176}, 'call': {'r2_score': -0.0010502349083447715, 'R2_score_squared_OSXS': -0.0010358970167310133}, 'put': {'r2_score': -4.33589196810678, 'R2_score_squared_OSXS': -4.330736601874118}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.004142388317459833, 'R2_score_squared_OSXS': -0.00407963456542948}, 'call': {'r2_score': -0.0018945982878506573, 'R2_score_squared_OSXS': -0.0018939211311050919}, 'put': {'r2_score': -7.040283872528393, 'R2_score_squared_OSXS': -6.526891223616248}}, 'GBR_n100': {'all': {'r2_score': -0.0002435303205865491, 'R2_score_squared_OSXS': -7.619129311575712e-05}, 'call': {'r2_score': -0.00021502788376492887, 'R2_score_squared_OSXS': -2.698705768899856e-05}, 'put': {'r2_score': -0.11588781844920648, 'R2_score_squared_OSXS': -0.06449437760850318}}, 'RF_n100': {'all': {'r2_score': -1.0441842477656347, 'R2_score_squared_OSXS': -0.9896525995208183}, 'call': {'r2_score': -0.5775411668441619, 'R2_score_squared_OSXS': -0.5480220656613186}, 'put': {'r2_score': -1456.2295572752798, 'R2_score_squared_OSXS': -1378.1314272476263}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -2.8383989627567274e-05, 'R2_score_squared_OSXS': 8.167551090010328e-06}, 'call': {'r2_score': 8.241326422542272e-05, 'R2_score_squared_OSXS': 0.0001712607409641853}, 'put': {'r2_score': -2.3516974036683598, 'R2_score_squared_OSXS': -2.3234181117297625}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.00034171848797215354, 'R2_score_squared_OSXS': -0.00033053196737231616}, 'call': {'r2_score': -4.604546375430729e-05, 'R2_score_squared_OSXS': -2.33615789839714e-05}, 'put': {'r2_score': -4.955163781179378, 'R2_score_squared_OSXS': -4.954030727730349}}, 'GBR_n100': {'all': {'r2_score': -5.1617720622676444e-05, 'R2_score_squared_OSXS': -2.461888100047105e-07}, 'call': {'r2_score': -0.00010267037699485115, 'R2_score_squared_OSXS': 7.018869041974796e-06}, 'put': {'r2_score': -0.07302000093087124, 'R2_score_squared_OSXS': -0.06152756375404578}}, 'RF_n100': {'all': {'r2_score': -2.9266841767429215, 'R2_score_squared_OSXS': -2.762284513622527}, 'call': {'r2_score': -1.5211943984085008, 'R2_score_squared_OSXS': -1.4405103747876908}, 'put': {'r2_score': -19794.222573003302, 'R2_score_squared_OSXS': -18606.317296515248}}}, {'Lasso_alpha0.1': {'all': {'r2_score': -0.0008792893109643707, 'R2_score_squared_OSXS': -0.0007384713589819736}, 'call': {'r2_score': -0.0006872236621351391, 'R2_score_squared_OSXS': -0.00045581966565699794}, 'put': {'r2_score': -0.5251166818270956, 'R2_score_squared_OSXS': -0.5239061098203392}}, 'Ridge_alpha0.1': {'all': {'r2_score': -0.0008704620447499423, 'R2_score_squared_OSXS': -0.0007090934440665553}, 'call': {'r2_score': -0.00010412386023106457, 'R2_score_squared_OSXS': 6.79176948565896e-05}, 'put': {'r2_score': -1.547502176415601, 'R2_score_squared_OSXS': -1.5128572603660508}}, 'GBR_n100': {'all': {'r2_score': -8.718663164297702e-05, 'R2_score_squared_OSXS': -7.399217480053011e-06}, 'call': {'r2_score': -0.00018619397426333784, 'R2_score_squared_OSXS': -5.295215157685718e-06}, 'put': {'r2_score': -0.0059736673850585564, 'R2_score_squared_OSXS': -0.001379135943860188}}, 'RF_n100': {'all': {'r2_score': -7.097312515133964, 'R2_score_squared_OSXS': -6.521712021371655}, 'call': {'r2_score': -3.598488074015915, 'R2_score_squared_OSXS': -3.3249424913529086}, 'put': {'r2_score': -6237.642204404828, 'R2_score_squared_OSXS': -5692.255115131747}}}]
# choice_of_feature = "nonsparse_features"

model2avg_r2score = {}
model2avg_r2score_OSXS = {}

for i, year_result in enumerate(result):
    print("year:", i + 1996)
    for model, cate2r2score in year_result.items():
        print("model:", model)
        if model2avg_r2score.get(model, -1) == -1:
            model2avg_r2score[model] = {}
        if model2avg_r2score_OSXS.get(model, -1) == -1:
            model2avg_r2score_OSXS[model] = {}
        for category, r2_score_dict in cate2r2score.items():
            print("category:", category)
            model2avg_r2score[model][category] = (
                model2avg_r2score[model].get(category, 0) 
                + r2_score_dict['r2_score'] / len(result)
            )
            model2avg_r2score_OSXS[model][category] = (
                model2avg_r2score_OSXS[model].get(category, 0) 
                + r2_score_dict['R2_score_squared_OSXS'] / len(result)
            )

print("-----------")
print("model2avg_r2score:")
pprint(model2avg_r2score)
print("model2avg_r2score_OSXS:")
pprint(model2avg_r2score_OSXS)


# -------- plot bar plot of R2_OS --------- 
barWidth = 0.2

bars1 = [val["all"] for val in model2avg_r2score.values()]
bars2 = [val["call"] for val in model2avg_r2score.values()]
bars3 = [val["put"] for val in model2avg_r2score.values()]

for bars in [bars1, bars2, bars3]:
    for i in range(len(bars)):
        if abs(bars[i]) >= 100:
            bars[i] = 100 * (-1 if bars[i] < 0 else 1) 

print(bars1, bars2, bars3)
r1 = np.arange(len(model2avg_r2score))
r2 = [i + barWidth for i in r1]
r3 = [i + 2 * barWidth for i in r1]

fig, ax = plt.subplots(figsize=(10, 5))
plt.bar(r1, bars1, width = barWidth, color="purple", label="all")
plt.bar(r2, bars2, width = barWidth, color="blue", label="call")
plt.bar(r3, bars3, width = barWidth, color="black", label="put")

# general layout
plt.xticks([r + barWidth for r in range(len(bars1))], 
           list(model2avg_r2score.keys()))
plt.ylabel('avg r2 score')
plt.legend(loc = "upper right")

ax.set(xlim=(-1, 5), ylim=(-0.5, 0.1), yticks=np.arange(-0.5, 0.1, 0.1))

plt.hlines(0, -1, 10, linestyle="dashed", color="black")
# Show graphic
plt.show()
fig.savefig(Path(f"analysis_plots/{choice_of_feature}", "R2_OS_comparison.png"))

# -------- plot box plot of R2_OS --------- 
model_names = ["Lasso_alpha0.1", "Ridge_alpha0.1", 
               "GBR_n100", "RF_n100"]
D = [[] for _ in range(len(model_names))]
for res in result:
    for i, model_name in enumerate(model_names):
        D[i].append(
            res[model_name]["all"]["r2_score"]
        )

fig, ax = plt.subplots(figsize=(10, 5))
VP = ax.boxplot(D, positions=[2, 4, 6, 8], widths=1.5, patch_artist=True,
                showmeans=False, showfliers=False,
                labels=model_names,
                medianprops={"color": "white", "linewidth": 0.5},
                boxprops={"facecolor": "C0", "edgecolor": "white",
                          "linewidth": 0.5},
                whiskerprops={"color": "C0", "linewidth": 1.5},
                capprops={"color": "C0", "linewidth": 1.5})

ylim = 0.03
ax.set(xlim=(1, 10), xticks=np.arange(2, 10, 2),
       ylim=(-ylim, ylim), yticks=np.arange(-ylim, ylim, 0.05))

plt.hlines(0, -1, 10, linestyle="dashed", color="black")
plt.show()
fig.savefig(Path(f"analysis_plots/{choice_of_feature}", "R2_OS_boxplot.png"))

# -------- plot bar plot of R2_OSXS --------- 
barWidth = 0.2

bars1 = [val["all"] for val in model2avg_r2score_OSXS.values()]
bars2 = [val["call"] for val in model2avg_r2score_OSXS.values()]
bars3 = [val["put"] for val in model2avg_r2score_OSXS.values()]

for bars in [bars1, bars2, bars3]:
    for i in range(len(bars)):
        if abs(bars[i]) >= 100:
            bars[i] = 100 * (-1 if bars[i] < 0 else 1) 

print(bars1, bars2, bars3)
r1 = np.arange(len(model2avg_r2score_OSXS))
r2 = [i + barWidth for i in r1]
r3 = [i + 2 * barWidth for i in r1]

fig, ax = plt.subplots(figsize=(10, 5))
plt.bar(r1, bars1, width = barWidth, color="purple", label="all")
plt.bar(r2, bars2, width = barWidth, color="blue", label="call")
plt.bar(r3, bars3, width = barWidth, color="black", label="put")

# general layout
plt.xticks([r + barWidth for r in range(len(bars1))], 
           list(model2avg_r2score_OSXS.keys()))
plt.ylabel('avg r2 score')
plt.legend(loc = "upper right")

ax.set(xlim=(-1, 5), ylim=(-0.5, 0.1), yticks=np.arange(-0.5, 0.1, 0.1))

plt.hlines(0, -1, 10, linestyle="dashed", color="black")

# Show graphic
plt.show()
fig.savefig(Path(f"analysis_plots/{choice_of_feature}", "R2_OSXS_comparison.png"))


# -------- plot box plot of R2_OS --------- 
model_names = ["Lasso_alpha0.1", "Ridge_alpha0.1", 
               "GBR_n100", "RF_n100"]
D = [[] for _ in range(len(model_names))]
for res in result:
    for i, model_name in enumerate(model_names):
        D[i].append(
            res[model_name]["all"]["R2_score_squared_OSXS"]
        )

fig, ax = plt.subplots(figsize=(10, 5))
VP = ax.boxplot(D, positions=[2, 4, 6, 8], widths=1.5, patch_artist=True,
                showmeans=False, showfliers=False,
                labels=model_names,
                medianprops={"color": "white", "linewidth": 0.5},
                boxprops={"facecolor": "C0", "edgecolor": "white",
                          "linewidth": 0.5},
                whiskerprops={"color": "C0", "linewidth": 1.5},
                capprops={"color": "C0", "linewidth": 1.5})

ylim = 0.03
ax.set(xlim=(1, 10), xticks=np.arange(2, 10, 2),
       ylim=(-ylim, ylim), yticks=np.arange(-ylim, ylim, 0.05))
plt.hlines(0, 0, 10, linestyle="dashed", color="black")
plt.show()
fig.savefig(Path(f"analysis_plots/{choice_of_feature}", "R2_OSXS_boxplot.png"))
